
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ü–û–î–ë–ï–†–ò –°–ò–ù–û–ù–ò–ú–´ / –ê–ù–¢–û–ù–ò–ú–´ ‚Äî –ò–≥—Ä–∞</title>
<style>
  :root{
    --bg1:#c9e4ff;--bg2:#fbc2eb;--bg3:#fad0c4;
    --card:#ffffff;--text:#2b2b2b;--accent:#6a5acd;--accent2:#ff6f91;--ok:#2ecc71;--bad:#ff4e88;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:"Nunito", "Segoe UI", system-ui, -apple-system, Arial, sans-serif; color:var(--text);
    min-height:100vh; display:flex; align-items:center; justify-content:center; padding:32px;
    background: linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
    background-size:400% 400%; animation: grad 18s ease infinite;
  }
  @keyframes grad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
  .app{ width: min(1100px, 100%); }
  header{ text-align:center; margin-bottom:18px; }
  h1{ font-size: clamp(24px, 3.6vw, 42px); margin: 0 0 6px; color:#4b0082; text-shadow:0 8px 30px rgba(0,0,0,.15); }
  .subtitle{opacity:.85}

  .card{ background:var(--card); border-radius:22px; box-shadow:0 20px 60px rgba(0,0,0,.15);
         padding:22px; overflow:hidden; position:relative; animation: pop .6s ease both }
  @keyframes pop{ from{transform:translateY(16px) scale(.98); opacity:0} to{transform:none; opacity:1} }

  .nav{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom:14px; }
  .nav button{ flex:1 1 160px; border:0; padding:12px 16px; border-radius:14px; font-weight:700; cursor:pointer;
               background:rgba(255,255,255,.6); color:#3b3b3b; box-shadow:0 8px 20px rgba(0,0,0,.08);
               transition:.25s transform, .25s background }
  .nav button:hover{ transform: translateY(-2px) }
  .nav button.active{ background:linear-gradient(135deg, var(--accent), var(--accent2)); color:#fff }

  .panel{ display:none }
  .panel.active{ display:block; animation: fade .4s ease }
  @keyframes fade{ from{opacity:0; transform: translateY(8px)} to{opacity:1; transform:none} }

  .row{ display:grid; grid-template-columns: 1fr auto 1.2fr; gap:12px; align-items:center; padding:8px 10px; border-radius:12px; }
  .row:nth-child(odd){ background: rgba(106,90,205,.06) }
  .row .arrow{ opacity:.6 }

  input[type="text"], select{ width:100%; padding:12px 14px; border:2px solid #e6e6f0; border-radius:12px; font-size:16px; transition:border .2s, box-shadow .2s }
  input[type="text"]:focus, select:focus{ outline:none; border-color: var(--accent); box-shadow:0 0 0 6px rgba(106,90,205,.12) }

  .choices{ display:grid; gap:10px }
  .choice{ padding:12px 14px; border-radius:12px; border:2px solid #eae7ff; cursor:pointer; transition:.2s transform, .2s border, .2s box-shadow }
  .choice:hover{ transform: translateY(-2px); box-shadow:0 8px 20px rgba(0,0,0,.08) }
  .choice.correct{ border-color: var(--ok); background: rgba(46,204,113,.1) }
  .choice.wrong{ border-color: var(--bad); background: rgba(255,78,136,.08) }

  .controls{ display:flex; gap:10px; flex-wrap:wrap; margin-top:16px }
  .btn{ border:0; padding:12px 18px; border-radius:12px; font-weight:800; cursor:pointer; color:#fff; background:linear-gradient(135deg, var(--accent), var(--accent2));
        box-shadow:0 10px 24px rgba(0,0,0,.18); transition:.25s transform, .25s filter }
  .btn:hover{ transform: translateY(-2px) }
  .btn.ghost{ background:#fff; color:#333; border:2px solid #e6e6f0 }
  .pill{ display:inline-flex; align-items:center; gap:8px; background:#fff; border-radius:999px; padding:8px 14px; font-weight:700; box-shadow:0 6px 16px rgba(0,0,0,.08) }
  .pill .dot{ width:10px; height:10px; border-radius:50%; background:var(--accent2) }

  .feedback{ margin-top:12px; font-weight:800 }
  .ok{ color: var(--ok) }
  .bad{ color: var(--bad) }

  .grid2{ display:grid; grid-template-columns: 1fr 1fr; gap:16px }

  .progress{
    height:10px; background:rgba(255,255,255,.7); border-radius:999px; overflow:hidden; margin: 14px 0 6px;
  }
  .progress > i{ display:block; height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent2)); transition: width .4s ease }

  /* Matching with arrows */
  .match-wrap{ position:relative; display:grid; grid-template-columns: 1fr 1fr; gap:60px; padding:20px 10px; }
  .col{ display:flex; flex-direction:column; gap:10px }
  .node{ position:relative; padding:12px 14px; background:#fff; border:2px solid #e6e6f0; border-radius:12px; cursor:pointer; user-select:none; transition:.2s box-shadow, .2s transform }
  .node:hover{ transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,.08) }
  .node.active{ border-color: var(--accent) }
  svg.lines{ position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none }
  .legend{ opacity:.8; font-size:14px; margin-bottom:6px }

  footer{ text-align:center; opacity:.7; margin-top:12px }
</style>
</head>
<body>
  <div class="app">
    <header>
      <h1>üåà –ü–û–î–ë–ï–†–ò –°–ò–ù–û–ù–ò–ú–´ –∏ –ê–ù–¢–û–ù–ò–ú–´</h1>
      <div class="subtitle">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è —Å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π</div>
      <div class="progress" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å"><i id="progressBar"></i></div>
      <div class="pill">–û—á–∫–∏: <span id="score">0</span> <span class="dot"></span> –ó–∞–¥–∞–Ω–∏–µ: <span id="step">1</span>/5</div>
    </header>

    <div class="nav">
      <button class="active" data-target="p1">1) –ü–æ–¥–±–µ—Ä–∏ —Å–∏–Ω–æ–Ω–∏–º—ã</button>
      <button data-target="p2">2) –í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω–æ–Ω–∏–º</button>
      <button data-target="p3">3) –ù–∞–π–¥–∏ –∞–Ω—Ç–æ–Ω–∏–º</button>
      <button data-target="p4">4) –ù–∞–π–¥–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ</button>
      <button data-target="p5">5) –°–æ–µ–¥–∏–Ω–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ</button>
    </div>

    <section class="card panel active" id="p1" aria-label="–ü–æ–¥–±–µ—Ä–∏ —Å–∏–Ω–æ–Ω–∏–º—ã">
      <h2>1) –ù–∞–π–¥–∏ –∫ —Å–ª–æ–≤—É –ø–æ–¥—Ö–æ–¥—è—â–µ–µ ¬´–¥—Ä—É–∂–µ—Å–∫–æ–µ —Å–ª–æ–≤–æ¬ª (—Å–∏–Ω–æ–Ω–∏–º).</h2>
      <div id="p1Rows"></div>
      <div class="controls">
        <button class="btn" id="p1Check">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        <button class="btn ghost" id="p1Reset">–û—á–∏—Å—Ç–∏—Ç—å</button>
      </div>
      <div class="feedback" id="p1Fb"></div>
    </section>

    <section class="card panel" id="p2" aria-label="–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω–æ–Ω–∏–º">
      <h2>2) –í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω–æ–Ω–∏–º</h2>
      <div id="p2Qs" class="grid2"></div>
      <div class="controls"><button class="btn" id="p2Check">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button></div>
      <div class="feedback" id="p2Fb"></div>
    </section>

    <section class="card panel" id="p3" aria-label="–ù–∞–π–¥–∏ –∞–Ω—Ç–æ–Ω–∏–º">
      <h2>3) –ù–∞–π–¥–∏ –∫ —Å–ª–æ–≤—É –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∞–Ω—Ç–æ–Ω–∏–º</h2>
      <div id="p3Rows"></div>
      <div class="controls">
        <button class="btn" id="p3Check">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        <button class="btn ghost" id="p3Reset">–û—á–∏—Å—Ç–∏—Ç—å</button>
      </div>
      <div class="feedback" id="p3Fb"></div>
    </section>

    <section class="card panel" id="p4" aria-label="–ù–∞–π–¥–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ —Å–ª–æ–≤–æ (–≤–∞—Ä–∏–∞–Ω—Ç—ã)">
      <h2>4) –ù–∞–π–¥–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ —Å–ª–æ–≤–æ</h2>
      <div id="p4Qs" class="grid2"></div>
      <div class="controls"><button class="btn" id="p4Check">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button></div>
      <div class="feedback" id="p4Fb"></div>
    </section>

    <section class="card panel" id="p5" aria-label="–°–æ–µ–¥–∏–Ω–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è">
      <h2>5) –ò–≥—Ä–∞: —Å–æ–µ–¥–∏–Ω–∏ —Å–ª–æ–≤–∞ —Å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏</h2>
      <div class="legend">–ù–∞–∂–º–∏ —Å–ª–æ–≤–æ —Å–ª–µ–≤–∞, –∑–∞—Ç–µ–º –ø–æ–¥—Ö–æ–¥—è—â—É—é –ø–∞—Ä—É —Å–ø—Ä–∞–≤–∞ ‚Äî –ø–æ—è–≤–∏—Ç—Å—è —Å—Ç—Ä–µ–ª–∫–∞. –ï—â—ë —Ä–∞–∑ –ø–æ —Å—Ç—Ä–µ–ª–∫–µ ‚Äî –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å.</div>
      <div class="match-wrap" id="matchWrap">
        <svg class="lines" id="lines"></svg>
        <div class="col" id="leftCol"></div>
        <div class="col" id="rightCol"></div>
      </div>
      <div class="controls">
        <button class="btn" id="p5Check">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        <button class="btn ghost" id="p5Reset">–°–±—Ä–æ—Å–∏—Ç—å –ª–∏–Ω–∏–∏</button>
      </div>
      <div class="feedback" id="p5Fb"></div>
    </section>

    <div class="controls" style="justify-content:center; margin-top:14px">
      <button class="btn ghost" id="prev">‚Üê –ù–∞–∑–∞–¥</button>
      <button class="btn" id="next">–î–∞–ª—å—à–µ ‚Üí</button>
    </div>

    <footer>–°–æ–≤–µ—Ç: –≤—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞–Ω–∏—è –ø–æ –ø–æ—Ä—è–¥–∫—É, —á—Ç–æ–±—ã –Ω–∞–±—Ä–∞—Ç—å –º–∞–∫—Å–∏–º—É–º –æ—á–∫–æ–≤ ‚ú®</footer>
  </div>

<script>
  const $ = (sel, root=document)=> root.querySelector(sel);
  const $$ = (sel, root=document)=> Array.from(root.querySelectorAll(sel));
  const scoreEl = $('#score');
  const stepEl = $('#step');
  const progressBar = $('#progressBar');
  let score = 0;
  let step = 1;
  const stepsTotal = 5;
  const updateProgress = ()=>{
    stepEl.textContent = step;
    progressBar.style.width = (step/stepsTotal*100) + '%';
    scoreEl.textContent = score;
  }
  updateProgress();

  // –ù–∞–≤–∏–≥–∞—Ü–∏—è
  $$('.nav button').forEach(btn=>{
    btn.addEventListener('click',()=>{ showPanel(btn.dataset.target); });
  });
  function showPanel(id){
    $$('.nav button').forEach(b=>b.classList.toggle('active', b.dataset.target===id));
    $$('.panel').forEach(p=>p.classList.toggle('active', p.id===id));
    step = ['p1','p2','p3','p4','p5'].indexOf(id)+1; updateProgress();
  }
  $('#prev').onclick=()=>{ const idx=Math.max(0, ['p1','p2','p3','p4','p5'].indexOf($('.panel.active').id)-1); showPanel(['p1','p2','p3','p4','p5'][idx]); };
  $('#next').onclick=()=>{ const idx=Math.min(4, ['p1','p2','p3','p4','p5'].indexOf($('.panel.active').id)+1); showPanel(['p1','p2','p3','p4','p5'][idx]); };

  // –î–ê–ù–ù–´–ï
  const dataP1 = [
    ['–ö—Ä–∞—Å–∏–≤—ã–π','–ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π'],['–†–∞–¥–æ—Å—Ç–Ω—ã–π','—Å—á–∞—Å—Ç–ª–∏–≤—ã–π'],['–ë—ã—Å—Ç—Ä—ã–π','—Å–∫–æ—Ä—ã–π'],['–°–º–µ–ª—ã–π','—Ö—Ä–∞–±—Ä—ã–π'],['–î–æ–±—Ä—ã–π','–ª–∞—Å–∫–æ–≤—ã–π'],
    ['–¢–∏—Ö–∏–π','—Å–ø–æ–∫–æ–π–Ω—ã–π'],['–ë–æ–ª—å—à–æ–π','–æ–≥—Ä–æ–º–Ω—ã–π'],['–£–º–Ω—ã–π','—Å–æ–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–π'],['–í–µ—Å—ë–ª—ã–π','–∂–∏–∑–Ω–µ—Ä–∞–¥–æ—Å—Ç–Ω—ã–π'],['–•–æ–ª–æ–¥–Ω—ã–π','–º–æ—Ä–æ–∑–Ω—ã–π']
  ];
  const dataP2 = [
    ['–ö—Ä–∞—Å–∏–≤—ã–π',['–æ–≥—Ä–æ–º–Ω—ã–π','–ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π','—Ö–æ–ª–æ–¥–Ω—ã–π'],'–ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π'],
    ['–†–∞–¥–æ—Å—Ç–Ω—ã–π',['–ø–µ—á–∞–ª—å–Ω—ã–π','—Å—á–∞—Å—Ç–ª–∏–≤—ã–π','–≥—Ä—É—Å—Ç–Ω—ã–π'],'—Å—á–∞—Å—Ç–ª–∏–≤—ã–π'],
    ['–ë—ã—Å—Ç—Ä—ã–π',['—Å–∫–æ—Ä—ã–π','—Ç—è–∂—ë–ª—ã–π','–ª–µ–Ω–∏–≤—ã–π'],'—Å–∫–æ—Ä—ã–π'],
    ['–°–º–µ–ª—ã–π',['—Ö—Ä–∞–±—Ä—ã–π','—Ä–æ–±–∫–∏–π','—Ç–∏—Ö–∏–π'],'—Ö—Ä–∞–±—Ä—ã–π'],
    ['–î–æ–±—Ä—ã–π',['—Å–µ—Ä–¥–∏—Ç—ã–π','–ª–∞—Å–∫–æ–≤—ã–π','–∑–ª–æ–π'],'–ª–∞—Å–∫–æ–≤—ã–π'],
    ['–¢–∏—Ö–∏–π',['—à—É–º–Ω—ã–π','—Å–ø–æ–∫–æ–π–Ω—ã–π','–≥—Ä–æ–º–∫–∏–π'],'—Å–ø–æ–∫–æ–π–Ω—ã–π'],
    ['–ë–æ–ª—å—à–æ–π',['–º–∞–ª–µ–Ω—å–∫–∏–π','–æ–≥—Ä–æ–º–Ω—ã–π','–∫—Ä–æ—à–µ—á–Ω—ã–π'],'–æ–≥—Ä–æ–º–Ω—ã–π'],
    ['–£–º–Ω—ã–π',['–≥–ª—É–ø—ã–π','—Å–æ–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–π','–ø—É—Å—Ç–æ–π'],'—Å–æ–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–π'],
    ['–í–µ—Å—ë–ª—ã–π',['–∂–∏–∑–Ω–µ—Ä–∞–¥–æ—Å—Ç–Ω—ã–π','—Å–∫—É—á–Ω—ã–π','–º—Ä–∞—á–Ω—ã–π'],'–∂–∏–∑–Ω–µ—Ä–∞–¥–æ—Å—Ç–Ω—ã–π'],
    ['–•–æ–ª–æ–¥–Ω—ã–π',['—Ç—ë–ø–ª—ã–π','–º–æ—Ä–æ–∑–Ω—ã–π','–∂–∞—Ä–∫–∏–π'],'–º–æ—Ä–æ–∑–Ω—ã–π']
  ];
  const dataP3 = [
    ['–î–æ–±—Ä—ã–π','–∑–ª–æ–π'],['–ë–æ–ª—å—à–æ–π','–º–∞–ª–µ–Ω—å–∫–∏–π'],['–¢—ë–ø–ª—ã–π','—Ö–æ–ª–æ–¥–Ω—ã–π'],['–ë—ã—Å—Ç—Ä—ã–π','–º–µ–¥–ª–µ–Ω–Ω—ã–π'],['–°–∏–ª—å–Ω—ã–π','—Å–ª–∞–±—ã–π'],
    ['–°–≤–µ—Ç–ª—ã–π','—Ç—ë–º–Ω—ã–π'],['–í–µ—Å—ë–ª—ã–π','–≥—Ä—É—Å—Ç–Ω—ã–π'],['–í—ã—Å–æ–∫–∏–π','–Ω–∏–∑–∫–∏–π'],['–î–∞–ª—ë–∫–∏–π','–±–ª–∏–∑–∫–∏–π'],['–ß–∏—Å—Ç—ã–π','–≥—Ä—è–∑–Ω—ã–π']
  ];
  const dataP4 = [
    ['–ë–æ–ª—å—à–æ–π',['–º–∞–ª–µ–Ω—å–∫–∏–π','–≤—ã—Å–æ–∫–∏–π','–¥–ª–∏–Ω–Ω—ã–π'],'–º–∞–ª–µ–Ω—å–∫–∏–π'],
    ['–î–æ–±—Ä—ã–π',['–ª–∞—Å–∫–æ–≤—ã–π','–∑–ª–æ–π','—Ö–æ—Ä–æ—à–∏–π'],'–∑–ª–æ–π'],
    ['–í–µ—Å—ë–ª—ã–π',['—Ä–∞–¥–æ—Å—Ç–Ω—ã–π','–≥—Ä—É—Å—Ç–Ω—ã–π','–∑–≤–æ–Ω–∫–∏–π'],'–≥—Ä—É—Å—Ç–Ω—ã–π'],
    ['–¢—ë–ø–ª—ã–π',['–º–æ—Ä–æ–∑–Ω—ã–π','–≥–æ—Ä—è—á–∏–π','–∂–∞—Ä–∫–∏–π'],'–º–æ—Ä–æ–∑–Ω—ã–π'],
    ['–ë—ã—Å—Ç—Ä—ã–π',['—Å–∫–æ—Ä—ã–π','–º–µ–¥–ª–µ–Ω–Ω—ã–π','–ª—ë–≥–∫–∏–π'],'–º–µ–¥–ª–µ–Ω–Ω—ã–π'],
    ['–î–∞–ª—ë–∫–∏–π',['–±–ª–∏–∑–∫–∏–π','–≤—ã—Å–æ–∫–∏–π','—à–∏—Ä–æ–∫–∏–π'],'–±–ª–∏–∑–∫–∏–π'],
    ['–¢–∏—Ö–∏–π',['—à—É–º–Ω—ã–π','—Å–ø–æ–∫–æ–π–Ω—ã–π','–Ω–µ–∂–Ω—ã–π'],'—à—É–º–Ω—ã–π'],
    ['–°–º–µ–ª—ã–π',['—Ö—Ä–∞–±—Ä—ã–π','—Ç—Ä—É—Å–ª–∏–≤—ã–π','–¥–æ–±—Ä—ã–π'],'—Ç—Ä—É—Å–ª–∏–≤—ã–π'],
    ['–î–µ–Ω—å',['–Ω–æ—á—å','–≤–µ—á–µ—Ä','—É—Ç—Ä–æ'],'–Ω–æ—á—å'],
    ['–°–∏–ª—å–Ω—ã–π',['—Å–ª–∞–±—ã–π','–∫—Ä–µ–ø–∫–∏–π','–º–æ–≥—É—á–∏–π'],'—Å–ª–∞–±—ã–π']
  ];
  // –î–ª—è p5 matching
  const leftP5 = ['–î–æ–±—Ä—ã–π','–ë–æ–ª—å—à–æ–π','–¢—ë–ø–ª—ã–π','–ë—ã—Å—Ç—Ä—ã–π','–°–∏–ª—å–Ω—ã–π','–°–≤–µ—Ç–ª—ã–π','–í–µ—Å—ë–ª—ã–π','–í—ã—Å–æ–∫–∏–π','–î–∞–ª—ë–∫–∏–π','–ß–∏—Å—Ç—ã–π'];
  const rightP5 = ['–Ω–∏–∑–∫–∏–π','–≥—Ä—è–∑–Ω—ã–π','–∑–ª–æ–π','—Ö–æ–ª–æ–¥–Ω—ã–π','—Å–ª–∞–±—ã–π','–≥—Ä—É—Å—Ç–Ω—ã–π','–º–µ–¥–ª–µ–Ω–Ω—ã–π','–±–ª–∏–∑–∫–∏–π','–º–∞–ª–µ–Ω—å–∫–∏–π','—Ç—ë–º–Ω—ã–π'];
  const correctMapP5 = {
    '–î–æ–±—Ä—ã–π':'–∑–ª–æ–π', '–ë–æ–ª—å—à–æ–π':'–º–∞–ª–µ–Ω—å–∫–∏–π', '–¢—ë–ø–ª—ã–π':'—Ö–æ–ª–æ–¥–Ω—ã–π', '–ë—ã—Å—Ç—Ä—ã–π':'–º–µ–¥–ª–µ–Ω–Ω—ã–π', '–°–∏–ª—å–Ω—ã–π':'—Å–ª–∞–±—ã–π',
    '–°–≤–µ—Ç–ª—ã–π':'—Ç—ë–º–Ω—ã–π', '–í–µ—Å—ë–ª—ã–π':'–≥—Ä—É—Å—Ç–Ω—ã–π', '–í—ã—Å–æ–∫–∏–π':'–Ω–∏–∑–∫–∏–π', '–î–∞–ª—ë–∫–∏–π':'–±–ª–∏–∑–∫–∏–π', '–ß–∏—Å—Ç—ã–π':'–≥—Ä—è–∑–Ω—ã–π'
  };

  // P1 render
  const p1Rows = $('#p1Rows');
  dataP1.forEach(([w, ans])=>{
    const row = document.createElement('div'); row.className='row';
    row.innerHTML = `<div><strong>${w}</strong></div><div class="arrow">‚Üí</div><div><input type="text" placeholder="–≤–ø–∏—à–∏ —Å–∏–Ω–æ–Ω–∏–º" data-right="${ans}"></div>`;
    p1Rows.appendChild(row);
  });
  $('#p1Check').onclick=()=>{
    let ok=0; $$('#p1Rows input').forEach(inp=>{ const right=inp.dataset.right.trim().toLowerCase(); const val=inp.value.trim().toLowerCase();
      if(val===right){ inp.style.borderColor='var(--ok)'; ok++; } else { inp.style.borderColor='var(--bad)'; }
    });
    $('#p1Fb').innerHTML = ok===dataP1.length ? `<span class="ok">–û—Ç–ª–∏—á–Ω–æ! –í—Å–µ ${ok}/${dataP1.length} –ø—Ä–∞–≤–∏–ª—å–Ω–æ.</span>` : `–ü—Ä–∞–≤–∏–ª—å–Ω–æ: <b>${ok}</b> –∏–∑ <b>${dataP1.length}</b>.`;
    score += ok; updateProgress();
  }
  $('#p1Reset').onclick=()=>{ $$('#p1Rows input').forEach(i=>{i.value=''; i.style.borderColor='#e6e6f0'}); $('#p1Fb').textContent=''; }

  // P2 render
  const p2Qs = $('#p2Qs');
  dataP2.forEach(([q, opts, right], qi)=>{
    const box = document.createElement('div'); box.className='card'; box.style.padding='14px';
    const choices = opts.map((o, i)=>`<label class="choice"><input style="margin-right:8px" type="radio" name="p2_${qi}" value="${o}"> ${o}</label>`).join('');
    box.innerHTML = `<div style="font-weight:800; margin-bottom:8px">${q}</div><div class="choices">${choices}</div>`;
    box.dataset.right = right; p2Qs.appendChild(box);
  });
  $('#p2Check').onclick=()=>{
    let ok=0; $$('#p2Qs .card').forEach(card=>{
      const right = card.dataset.right; const chosen = card.querySelector('input[type=radio]:checked');
      $$('.choice', card).forEach(c=>c.classList.remove('correct','wrong'));
      if(chosen){ const label = chosen.closest('.choice'); if(chosen.value===right){ label.classList.add('correct'); ok++; } else { label.classList.add('wrong'); }}
    });
    $('#p2Fb').innerHTML = ok===dataP2.length ? `<span class="ok">–°—É–ø–µ—Ä! ${ok}/${dataP2.length} –≤–µ—Ä–Ω–æ.</span>` : `–ü—Ä–∞–≤–∏–ª—å–Ω–æ: <b>${ok}</b> –∏–∑ <b>${dataP2.length}</b>.`;
    score += ok; updateProgress();
  }

  // P3 render
  const p3Rows = $('#p3Rows');
  dataP3.forEach(([w, ans])=>{
    const row = document.createElement('div'); row.className='row';
    row.innerHTML = `<div><strong>${w}</strong></div><div class="arrow">‚Üí</div><div><input type="text" placeholder="–≤–ø–∏—à–∏ –∞–Ω—Ç–æ–Ω–∏–º" data-right="${ans}"></div>`;
    p3Rows.appendChild(row);
  });
  $('#p3Check').onclick=()=>{
    let ok=0; $$('#p3Rows input').forEach(inp=>{ const right=inp.dataset.right.trim().toLowerCase(); const val=inp.value.trim().toLowerCase();
      if(val===right){ inp.style.borderColor='var(--ok)'; ok++; } else { inp.style.borderColor='var(--bad)'; }
    });
    $('#p3Fb').innerHTML = ok===dataP3.length ? `<span class="ok">–û—Ç–ª–∏—á–Ω–æ! –í—Å–µ ${ok}/${dataP3.length} –ø—Ä–∞–≤–∏–ª—å–Ω–æ.</span>` : `–ü—Ä–∞–≤–∏–ª—å–Ω–æ: <b>${ok}</b> –∏–∑ <b>${dataP3.length}</b>.`;
    score += ok; updateProgress();
  }
  $('#p3Reset').onclick=()=>{ $$('#p3Rows input').forEach(i=>{i.value=''; i.style.borderColor='#e6e6f0'}); $('#p3Fb').textContent=''; }

  // P4 render
  const p4Qs = $('#p4Qs');
  dataP4.forEach(([q, opts, right], qi)=>{
    const box = document.createElement('div'); box.className='card'; box.style.padding='14px';
    const choices = opts.map(o=>`<label class="choice"><input style="margin-right:8px" type="radio" name="p4_${qi}" value="${o}"> ${o}</label>`).join('');
    box.innerHTML = `<div style="font-weight:800; margin-bottom:8px">${q}</div><div class="choices">${choices}</div>`;
    box.dataset.right = right; p4Qs.appendChild(box);
  });
  $('#p4Check').onclick=()=>{
    let ok=0; $$('#p4Qs .card').forEach(card=>{
      const right = card.dataset.right; const chosen = card.querySelector('input[type=radio]:checked');
      $$('.choice', card).forEach(c=>c.classList.remove('correct','wrong'));
      if(chosen){ const label = chosen.closest('.choice'); if(chosen.value===right){ label.classList.add('correct'); ok++; } else { label.classList.add('wrong'); }}
    });
    $('#p4Fb').innerHTML = ok===dataP4.length ? `<span class="ok">–ë–ª–µ—Å—Ç—è—â–µ! ${ok}/${dataP4.length} –≤–µ—Ä–Ω–æ.</span>` : `–ü—Ä–∞–≤–∏–ª—å–Ω–æ: <b>${ok}</b> –∏–∑ <b>${dataP4.length}</b>.`;
    score += ok; updateProgress();
  }

  // P5 matching with arrows
  const leftCol = $('#leftCol'); const rightCol = $('#rightCol'); const svg = $('#lines');
  const leftNodes = []; const rightNodes = []; const connections = new Map(); // key: leftIndex -> rightIndex
  function renderP5(){
    leftCol.innerHTML=''; rightCol.innerHTML=''; svg.innerHTML=''; connections.clear();
    leftP5.forEach((w,i)=>{ const d=document.createElement('div'); d.className='node'; d.textContent=(i+1)+'. '+w; d.dataset.index=i; leftCol.appendChild(d); leftNodes[i]=d; });
    rightP5.forEach((w,i)=>{ const d=document.createElement('div'); d.className='node'; d.textContent=String.fromCharCode(1072+i)+') '+w; d.dataset.index=i; rightCol.appendChild(d); rightNodes[i]=d; });
  }
  renderP5();

  let selectedLeft = null;
  leftCol.addEventListener('click', e=>{
    const node = e.target.closest('.node'); if(!node) return; leftNodes.forEach(n=>n.classList.remove('active'));
    node.classList.add('active'); selectedLeft = +node.dataset.index;
  });
  rightCol.addEventListener('click', e=>{
    const node = e.target.closest('.node'); if(!node || selectedLeft===null) return;
    const rIndex = +node.dataset.index; // set / replace connection
    connections.set(selectedLeft, rIndex);
    leftNodes.forEach(n=>n.classList.remove('active')); selectedLeft = null; drawLines();
  });

  function drawLines(){
    svg.innerHTML='';
    const lRect = leftCol.getBoundingClientRect(); const rRect = rightCol.getBoundingClientRect(); const wrapRect = $('#matchWrap').getBoundingClientRect();
    connections.forEach((rIndex,lIndex)=>{
      const a = leftNodes[lIndex].getBoundingClientRect();
      const b = rightNodes[rIndex].getBoundingClientRect();
      const x1 = a.right - wrapRect.left; const y1 = a.top + a.height/2 - wrapRect.top;
      const x2 = b.left - wrapRect.left;  const y2 = b.top + b.height/2 - wrapRect.top;
      const path = document.createElementNS('http://www.w3.org/2000/svg','path');
      const m = `M ${x1} ${y1} C ${x1+80} ${y1}, ${x2-80} ${y2}, ${x2} ${y2}`;
      path.setAttribute('d', m);
      path.setAttribute('stroke', 'url(#grad)'); path.setAttribute('stroke-width','3'); path.setAttribute('fill','none');
      path.addEventListener('click', ()=>{ connections.delete(lIndex); drawLines(); });
      svg.appendChild(path);
    });
    // gradient def
    if(!$('#gdef', svg)){
      const defs = document.createElementNS('http://www.w3.org/2000/svg','defs');
      const lg = document.createElementNS('http://www.w3.org/2000/svg','linearGradient'); lg.id='grad'; lg.innerHTML = `<stop offset="0%" stop-color="${getComputedStyle(document.documentElement).getPropertyValue('--accent').trim()}"></stop><stop offset="100%" stop-color="${getComputedStyle(document.documentElement).getPropertyValue('--accent2').trim()}"></stop>`; defs.id='gdef';
      defs.appendChild(lg); svg.appendChild(defs);
    }
  }
  window.addEventListener('resize', drawLines);

  $('#p5Check').onclick=()=>{
    let ok=0; leftP5.forEach((word, i)=>{ const rIdx = connections.get(i); if(rIdx!=null){ const chosen= rightP5[rIdx]; if(correctMapP5[word]===chosen) ok++; }});
    $('#p5Fb').innerHTML = ok===leftP5.length ? `<span class="ok">–ò–¥–µ–∞–ª—å–Ω–æ! ${ok}/${leftP5.length} —Å–≤—è–∑–µ–π –≤–µ—Ä–Ω—ã.</span>` : `–ü—Ä–∞–≤–∏–ª—å–Ω–æ: <b>${ok}</b> –∏–∑ <b>${leftP5.length}</b>. –ù–∞–∂–º–∏ –Ω–∞ –ª–∏–Ω–∏—é, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞.`;
    score += ok; updateProgress();
  }
  $('#p5Reset').onclick=()=>{ renderP5(); $('#p5Fb').textContent=''; drawLines(); }

</script>—ã
</body>
</html>